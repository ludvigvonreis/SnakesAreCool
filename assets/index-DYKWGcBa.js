var T=Object.defineProperty;var O=(i,t,r)=>t in i?T(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var s=(i,t,r)=>O(i,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))n(h);new MutationObserver(h=>{for(const c of h)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(h){const c={};return h.integrity&&(c.integrity=h.integrity),h.referrerPolicy&&(c.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?c.credentials="include":h.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(h){if(h.ep)return;h.ep=!0;const c=r(h);fetch(h.href,c)}})();class N{constructor(t,r,n,h,c,o){s(this,"score",0);s(this,"highScore",0);s(this,"scoreText");s(this,"highScoreText");s(this,"modalScoreText");s(this,"modalHighScoreText");s(this,"restartButton");s(this,"isGamePaused",!0);s(this,"isGameOver",!1);s(this,"isMenuVisible",!0);s(this,"shouldReset",!1);s(this,"isHighscoreVisible",!1);s(this,"isFirstLoad",!0);s(this,"loadHighScore",()=>{this.highScore=localStorage.getItem("highscore")});s(this,"updateUI",()=>{this.scoreText.textContent=`🍎 ${this.score}`,this.modalScoreText.textContent=this.isFirstLoad?"":`🍎  ${this.score}`,this.modalHighScoreText.textContent=this.isFirstLoad?"":`👑 ${this.highScore}`,this.highScoreText.textContent=`👑 ${this.highScore}`,this.highScoreText.style.transition=this.isHighscoreVisible?"opacity 1s ease":"none",this.highScoreText.style.opacity=this.isHighscoreVisible?1:0,this.modal.style.visibility=this.isMenuVisible?"visible":"hidden"});s(this,"tick",()=>{this.highScore=Math.max(this.highScore,this.score),this.isHighscoreVisible=this.highScore-this.score<=5&&this.score>=5,this.updateUI()});s(this,"reset",()=>{this.score=0,this.shouldReset=!1});s(this,"resetButton",()=>{this.shouldReset=!0,this.isGameOver=!1,this.isGamePaused=!1,this.isMenuVisible=!1,this.isFirstLoad=!1});s(this,"onGameOver",()=>{this.isGameOver=!0,this.isMenuVisible=!0,localStorage.setItem("highscore",this.highScore)});this.score=0,this.highScore=0,this.loadHighScore(),this.scoreText=document.getElementById(t),this.highScoreText=document.getElementById(r),this.restartButton=document.getElementById(n),this.modalScoreText=document.getElementById(h),this.modalHighScoreText=document.getElementById(c),this.modal=document.getElementById(o),this.restartButton.addEventListener("click",this.resetButton),this.updateUI()}}function B(i){return i[Math.floor(Math.random()*i.length)]}function m(i,t){return Math.random()*(t-i)+i}function v(i,t){return Math.sqrt(i*i+t*t)}function L(i,t){return i.x<t.x+t.width&&i.x+i.width>t.x&&i.y<t.y+t.height&&i.y+i.height>t.y}class C{constructor(t,r,n){s(this,"centerX",0);s(this,"centerY",0);s(this,"G",1e3);s(this,"drag",.001);s(this,"noiseFactor",.1);s(this,"amount",10);s(this,"dead",!1);s(this,"particles",[]);s(this,"colors",["#ff4500","#ff6347","#ff7f50","#ff8c00","#ff5722","#ff6f00","#e65100","#f4511e","#ff3d00","#ff3300","#d32f2f","#c62828","#e53935","#f44336","#e64a19","#ff0000","#b71c1c","#ffccbc","#ffab91","#ffc107","#ff9800","#fb8c00","#f57c00","#ffb74d","#ffa726","#ffcc80","#ff7043","#ff5722","#ff9e80","#e65100"]);s(this,"render",(t,r)=>{let n=0,h=0,c=0;for(const o of this.particles){o.dx=o.dx*(1-this.drag*Math.abs(o.dx)*r),o.dy=o.dy*(1-this.drag*Math.abs(o.dy)*r),o.dy=o.dy+this.G*r,o.dx+=(Math.random()-.5)*this.noiseFactor,o.dy+=(Math.random()-.5)*this.noiseFactor,o.x+=o.dx*r,o.y+=o.dy*r,o.life-=r*3,o.life>0?(o.opacity=o.life/5,c+=1):o.opacity=0;let G=Math.atan2(o.dy,o.dx);t.save(),t.translate(o.x,o.y),t.rotate(G),t.globalAlpha=o.opacity,t.fillStyle=o.color,t.fillRect(o.x-this.centerX,o.y-this.centerY,o.width,o.height),t.restore(),n+=o.x,h+=o.y}c<1&&(this.dead=!0),this.centerX=n/this.amount,this.centerY=h/this.amount,t.globalAlpha=1});this.centerX=t,this.centerY=r,this.amount=n;for(let h=0;h<n;h++)this.particles.push(new V(this.centerX+m(-5,5),this.centerY+m(-5,5),B(this.colors)))}}class V{constructor(t,r,n){s(this,"x",0);s(this,"y",0);s(this,"dx",0);s(this,"dy",0);s(this,"width",0);s(this,"height",0);s(this,"life",5);s(this,"dead",!1);s(this,"opacity",1);s(this,"color","");this.x=t,this.y=r,this.color=n,this.dx=m(-99,99),this.dy=m(-20,76),this.width=7+Math.random(),this.height=1+Math.random()}}const x=document.getElementById("snek"),d=x.getContext("2d"),y=500,g=500,f=20,X=3,w=y,b=g-X*f,p=window.devicePixelRatio,u=new N("score-text","highscore-text","reset-button","modal-score-text","modal-highscore-text","menu-modal");let S=new Date().getTime(),z=0,k=0,M=[];const e={x:60,y:12*f,dx:0,dy:0,speed:2.5,size:f,tail:0,history:[],color:"#2878fa"},a={x:18*f,y:12*f,size:f,eaten:!1,color:"#eb3d34",sprite:new Image},l={keyQueue:"None",lastMove:"None",queueChanged:!1};function Y(){e.history=[],e.tail=0,e.x=60,e.y=12*f,e.dx=0,e.dy=0,a.eaten=!1,a.x=18*f,a.y=12*f,l.score=0,l.keyQueue="None",l.lastMove="None",l.queueChanged=!1,M=[],u.reset()}function Q(){x.width=y*p,x.height=g*p,d.scale(p,p),a.sprite.src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/4fc3574e-d2ff-4d56-8d76-66e08422a5c5/dfxqw0x-3d877eef-cdcc-4d38-9b19-066b37530e77.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzRmYzM1NzRlLWQyZmYtNGQ1Ni04ZDc2LTY2ZTA4NDIyYTVjNVwvZGZ4cXcweC0zZDg3N2VlZi1jZGNjLTRkMzgtOWIxOS0wNjZiMzc1MzBlNzcucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0._5oaER-dOeVxnmMV-BX8ve1m_JV3He35hWEaaQ9gZDA",window.addEventListener("keydown",i=>{let t=i.key;l.keyQueue=t,l.queueChanged=!0},!1),R()}function R(){const i=()=>{if(u.shouldReset==!0&&Y(),requestAnimationFrame(i),z=new Date().getTime(),k=(z-S)/1e3,A(),q(),u.isGameOver==!1&&u.isGamePaused==!1){e.history.length<e.tail?e.history.push([e.x,e.y,e.dx,e.dy]):e.history.shift(),e.x+=e.dx*e.speed,e.y+=e.dy*e.speed;let t=!1;[e.x,e.y,t]=E(e.x,e.y),t&&I()}F()==!0&&I(),D()==!0&&(a.eaten=!0,e.tail+=5,M.push(new C(a.x,a.y,45)),u.score+=1),u.tick(),Z(),S=z};requestAnimationFrame(i)}function I(){u.onGameOver()}function Z(){d.fillStyle="#81bf43",d.fillRect(0,0,x.width,x.height);const i="#b2ff66",t="#99e65b";for(let r=3;r<g/e.size;r++)for(let n=0;n<y/e.size;n++){const h=n*e.size,c=r*e.size;(r+n)%2===0?d.fillStyle=i:d.fillStyle=t,d.fillRect(h,c,e.size,e.size)}d.drawImage(a.sprite,a.x,a.y,a.size,a.size),d.fillStyle=e.color,d.fillRect(e.x,e.y,e.size,e.size);for(const[r,n]of e.history.slice().reverse().entries())d.fillRect(n[0],n[1],e.size,e.size);for(const[r,n]of M.entries())n.dead==!0&&M.splice(r,1),n.render(d,k)}function A(){if(e.y%e.size==0){switch(l.keyQueue){case"ArrowLeft":{if(l.lastMove=="ArrowRight")break;e.dy=0,e.dx=-1,l.queueChanged=!1;break}case"ArrowRight":{if(l.lastMove=="ArrowLeft")break;e.dy=0,e.dx=1,l.queueChanged=!1;break}}l.queueChanged==!1&&(l.lastMove=l.keyQueue)}if(e.x%e.size==0){switch(l.keyQueue){case"ArrowUp":{if(l.lastMove==="ArrowDown")break;e.dy=-1,e.dx=0,l.queueChanged=!1;break}case"ArrowDown":{if(l.lastMove==="ArrowUp")break;e.dy=1,e.dx=0,l.queueChanged=!1;break}}l.queueChanged==!1&&(l.lastMove=l.keyQueue)}}function q(){if(a.eaten){let i=!1;for(;;){a.x=m(y-w,w),a.y=m(g-b,b),a.x=Math.floor(a.x/a.size)*a.size,a.y=Math.floor(a.y/a.size)*a.size;for(const t of e.history){let r={x:t[0],y:t[1],width:e.size,height:e.size},n={x:a.x,y:a.y,width:e.size,height:e.size};if(L(r,n)){i=!0;break}else i=!1}if(i==!1)break}a.eaten=!1}}function D(){return v(e.x-a.x,e.y-a.y)<10}function E(i,t){let r=Math.max(Math.min(i,y-e.size),y-w),n=Math.max(Math.min(t,g-e.size),g-b),h=i>y-e.size||i<y-w,c=t>g-e.size||t<g-b;return[r,n,h||c]}function F(){if(u.isGamePaused!=!0){for(const i of e.history)if(v(Math.abs(e.x-i[0]),Math.abs(e.y-i[1]))<=2)return!0;return!1}}Q();
